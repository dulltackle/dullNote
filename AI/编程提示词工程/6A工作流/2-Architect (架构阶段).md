# 阶段2: Architect (架构阶段)

目标: 共识文档 → 系统架构 → 模块设计 → 接口规范

## 设计阶段

1. 系统分层设计

    ```md
    基于 docs/<待开发需求>/CONSENSUS_<待开发需求>.md、ai/technology_selection.md 文档设计架构
    生成 docs/<待开发需求>/DESIGN_<待开发需求>.md 包含:
    1. 整体架构图(mermaid绘制)
    2. 分层设计和核心组件
    3. 模块依赖关系图
    4. 接口契约定义
    5. 数据流向图
    6. 异常处理策略
    7. 目录划分
    8. 与现有代码库的集成方案
    ```

2. 设计原则

    ```md
    - 严格按照任务范围，避免过度设计
    - 技术方案与现有架构对齐
    - 复用现有组件和模式
    - 避免重复造轮子
    ```

3. 质量门控

    ```md
    - 架构图清晰准确
    - 接口定义完整
    - 与现有系统无冲突
    - 设计可行性验证
    ```

## 论证阶段

1. 可行性分析

    ```md
    基于 docs/<待开发需求>/DESIGN_<待开发需求>.md 和 ai/technology_selection.md，谈谈该需求基于当前技术选型的可行性
    ```

2. 确定充分理解需求

    ```md
    请你详细阅读 docs/<待开发需求>/CONSENSUS_<待开发需求>.md，确认 docs/<待开发需求>/DESIGN_<待开发需求>.md 中的设计在功能点、输入输出、异常场景上可以满足 <待开发需求> 中的要求。
    若发现矛盾请立即标记并提交备注。
    ```

3. 实现方案比对

    ```md
    对于 <待开发需求> 当前的技术选型，对比一下不同的实现方案，是否存在方案更符合项目的需求，尽可能不要重复造轮子
    ```
