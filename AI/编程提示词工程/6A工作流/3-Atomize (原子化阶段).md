# 阶段3: Atomize (原子化阶段)

目标: 架构设计 → 拆分任务 → 明确接口 → 依赖关系

1. 任务拆分

    ```md
    基于 ai/docs/<待开发需求>/DESIGN_<待开发需求>.md 文档，采用小步迭代的方式，拆分出多个原子任务，并按依赖关系排序，写入 ai/docs/<待开发需求>/TASK_<待开发需求>.md
    每个原子任务包含:
    - 输入契约(前置依赖、输入数据、环境依赖)
    - 输出契约(输出数据、交付物、验收标准)
    - 实现约束(技术栈、接口规范、质量要求)
    - 依赖关系(后置任务、并行任务)
    - 代码目录结构划分
    - 可复用的工具类、异常处理机制和公共接口
    ```

2. 拆分原则

    ```md
    - 优先将框架搭好，然后再一步步填充细节
    - 按功能模块分解，确保任务原子性和独立性
    - 在设计上，要尽量保证可扩展性和可维护性
    - 依赖关系清晰，每个任务都有明确的前置依赖和后置任务
    - 复杂度可控，便于AI高成功率交付
    - 有明确的验收标准，尽量可以独立编译和测试
    ```

3. 生成任务依赖图(使用mermaid)

4. 质量门控

    ```md
    - 任务覆盖完整需求
    - 各个模块尽可能高内聚，低耦合
    - 依赖关系无循环
    - 如项目已有可用方法，必须考虑复用、或在现有方法上扩展、或进行方法重载，保证最小粒度改动，减少重复代码
    - 每个任务都可独立验证
    - 复杂度评估合理
    ```
